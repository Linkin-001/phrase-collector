# çƒ­é‡è½½åŠŸèƒ½è¯´æ˜

## æ¦‚è¿°

æœ¬é¡¹ç›®å·²é›†æˆçƒ­é‡è½½åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶å˜åŒ–å¹¶é‡æ–°åŠ è½½åº”ç”¨ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… **è‡ªåŠ¨æ–‡ä»¶ç›‘å¬**: ç›‘å¬ `src/renderer`ã€`src/components`ã€`src/database.js` ç­‰å…³é”®æ–‡ä»¶
- âœ… **æ™ºèƒ½è¿‡æ»¤**: åªç›‘å¬ `.js`ã€`.vue`ã€`.css`ã€`.html`ã€`.json` ç­‰ç›¸å…³æ–‡ä»¶
- âœ… **é˜²æŠ–æœºåˆ¶**: 300ms é˜²æŠ–ï¼Œé¿å…é¢‘ç¹é‡è½½
- âœ… **å¼€å‘ç¯å¢ƒä¸“ç”¨**: ä»…åœ¨å¼€å‘ç¯å¢ƒå¯ç”¨ï¼Œç”Ÿäº§æ„å»ºæ—¶è‡ªåŠ¨æ’é™¤
- âœ… **èµ„æºæ¸…ç†**: åº”ç”¨é€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†ç›‘å¬å™¨

## ä½¿ç”¨æ–¹æ³•

### å¼€å‘ç¯å¢ƒï¼ˆå¯ç”¨çƒ­é‡è½½ï¼‰
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æ¨¡å¼ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
npm run dev
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆä¸åŒ…å«çƒ­é‡è½½ï¼‰
```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æˆ–è€…ç›´æ¥è¿è¡Œï¼ˆä¸å¸¦çƒ­é‡è½½ï¼‰
npm start
```

## ç›‘å¬çš„æ–‡ä»¶ç±»å‹

- **JavaScript**: `.js` æ–‡ä»¶
- **Vueç»„ä»¶**: `.vue` æ–‡ä»¶
- **æ ·å¼æ–‡ä»¶**: `.css` æ–‡ä»¶
- **HTMLæ–‡ä»¶**: `.html` æ–‡ä»¶
- **é…ç½®æ–‡ä»¶**: `.json` æ–‡ä»¶

## ç›‘å¬çš„ç›®å½•

- `src/renderer/` - æ¸²æŸ“è¿›ç¨‹ç›¸å…³æ–‡ä»¶
- `src/components/` - Vueç»„ä»¶æ–‡ä»¶
- `src/database.js` - æ•°æ®åº“æ–‡ä»¶

## å·¥ä½œåŸç†

1. **æ¡ä»¶åŠ è½½**: åªåœ¨ `NODE_ENV=development` æ—¶åŠ è½½çƒ­é‡è½½æ¨¡å—
2. **æ–‡ä»¶ç›‘å¬**: ä½¿ç”¨ Node.js çš„ `fs.watch` API ç›‘å¬æ–‡ä»¶å˜åŒ–
3. **é˜²æŠ–å¤„ç†**: 300ms å†…çš„å¤šæ¬¡å˜åŒ–åªè§¦å‘ä¸€æ¬¡é‡è½½
4. **æ¸²æŸ“è¿›ç¨‹é‡è½½**: æ£€æµ‹åˆ°å˜åŒ–æ—¶é‡æ–°åŠ è½½æ¸²æŸ“è¿›ç¨‹
5. **æ„å»ºæ—¶æ’é™¤**: Vite æ„å»ºæ—¶é€šè¿‡æ’ä»¶æœºåˆ¶æ’é™¤çƒ­é‡è½½æ¨¡å—

## æ„å»ºé…ç½®

### Vite é…ç½® (vite.main.config.js)
```javascript
// ç”Ÿäº§æ„å»ºæ—¶æ’é™¤çƒ­é‡è½½æ¨¡å—
plugins: [
  {
    name: 'exclude-hot-reload',
    resolveId(id) {
      if (id.includes('hot-reload') && process.env.NODE_ENV === 'production') {
        return { id: 'virtual:hot-reload', external: false };
      }
    },
    load(id) {
      if (id === 'virtual:hot-reload') {
        return 'module.exports = class HotReload { constructor() {} init() {} destroy() {} };';
      }
    }
  }
]
```

### Package.json é…ç½®
```json
{
  "scripts": {
    "dev": "cross-env NODE_ENV=development npm run build:dev && cross-env NODE_ENV=development electron .",
    "build": "cross-env NODE_ENV=production npm run build:dev && electron-builder"
  },
  "build": {
    "files": [
      "!src/hot-reload.js"  // æ’é™¤çƒ­é‡è½½æ–‡ä»¶
    ]
  }
}
```

## æ—¥å¿—è¾“å‡º

å¼€å‘æ¨¡å¼ä¸‹ï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š

```
ğŸ”¥ Hot reload enabled for development
ğŸ“ Watching: /path/to/src/renderer
ğŸ“ Watching: /path/to/src/components
ğŸ“ Watching: /path/to/src/database.js
ğŸ”„ Reloading application...
âœ… Reload completed
```

## æ³¨æ„äº‹é¡¹

1. **ä¸»è¿›ç¨‹å˜åŒ–**: å½“å‰ç‰ˆæœ¬ä¸»è¦é‡è½½æ¸²æŸ“è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹æ–‡ä»¶å˜åŒ–éœ€è¦æ‰‹åŠ¨é‡å¯
2. **æ–‡ä»¶è·¯å¾„**: ç¡®ä¿ç›‘å¬çš„è·¯å¾„å­˜åœ¨ï¼Œä¸å­˜åœ¨çš„è·¯å¾„ä¼šè¢«è‡ªåŠ¨è·³è¿‡
3. **æ€§èƒ½å½±å“**: çƒ­é‡è½½ä»…åœ¨å¼€å‘ç¯å¢ƒå¯ç”¨ï¼Œä¸ä¼šå½±å“ç”Ÿäº§æ€§èƒ½
4. **ä¾èµ–å®‰è£…**: éœ€è¦å®‰è£… `cross-env` ä¾èµ–æ¥ç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§

## æ•…éšœæ’é™¤

### çƒ­é‡è½½ä¸å·¥ä½œ
1. ç¡®è®¤ä½¿ç”¨ `npm run dev` è€Œä¸æ˜¯ `npm start`
2. æ£€æŸ¥ `NODE_ENV` æ˜¯å¦è®¾ç½®ä¸º `development`
3. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰çƒ­é‡è½½ç›¸å…³æ—¥å¿—

### æ„å»ºåŒ…å«çƒ­é‡è½½ä»£ç 
1. ç¡®è®¤ä½¿ç”¨ `npm run build` è€Œä¸æ˜¯ `npm run dev`
2. æ£€æŸ¥ `NODE_ENV` æ˜¯å¦è®¾ç½®ä¸º `production`
3. éªŒè¯ `package.json` ä¸­çš„ `files` é…ç½®

## æ‰©å±•åŠŸèƒ½

å¦‚éœ€æ‰©å±•çƒ­é‡è½½åŠŸèƒ½ï¼Œå¯ä»¥ä¿®æ”¹ `src/hot-reload.js`ï¼š

- æ·»åŠ æ›´å¤šç›‘å¬ç›®å½•
- è°ƒæ•´é˜²æŠ–æ—¶é—´
- æ·»åŠ ä¸»è¿›ç¨‹é‡å¯åŠŸèƒ½
- è‡ªå®šä¹‰é‡è½½ç­–ç•¥