# Phrase Collector - 短语收集器

一款基于 Electron 的短语收集应用，旨在帮助用户在阅读文档时高效收集、管理和复习重要短语。

## 功能特性

### 1. 核心功能

#### 1.1 划词捕获
- 支持在任意文档/应用中选中文本
- 使用快捷键 `Ctrl+Alt+Q` 触发捕获功能
- 自动获取选中文本内容及来源信息

#### 1.2 收集界面
- **输入框**：
  - 顶部固定位置
  - 自动填充选中的文本
  - 允许用户编辑内容
  - 保存按钮（右侧图标）

- **收集列表**：
  - 按时间倒序显示所有保存的短语
  - 分页显示（每页20条）
  - 支持搜索过滤

- **短语条目**：
  - 显示短语文本
  - 来源应用/网名标识
  - 保存时间（相对时间显示）
  - 标记状态（认识/不认识）
  - 操作图标（删除、标记状态切换）

#### 1.3 标记系统
- **"不认识"状态**：
  - 红色星号标识
  - 文本加粗显示
  - 自动置顶在列表上方

- **标记功能**：
  - 点击星号图标切换状态
  - 支持批量标记操作

#### 1.4 来源链接
- 自动记录来源信息：
  - 浏览器URL（完整路径）
  - 本地文件路径
  - 应用名称（非浏览器环境）

- **链接交互**：
  - 点击来源信息在新窗口中打开原始位置
  - 浏览器页面自动表切换到原文位置（使用URL片段标识）

## 2. 数据管理

### 2.1 本地存储
- 使用 SQLite 数据库存储
- 存储位置：用户文档目录/PhraseCollector/data.db
- 数据结构：
  ```json
  {
    "id": "UUID",
    "text": "短语内容",
    "source": "来源URL/路径",
    "timestamp": "保存时间",
    "isUnknown": "是否不认识",
    "metadata": {
      "appName": "来源应用",
      "selectionContext": "上下文环境"
    }
  }
  ```

## 3. 技术实现方案

### 3.1 Electron 架构
- **主进程**：
  - 全局快捷键注册
  - 剪贴板监控（获取选中文本）
  - 本地数据库管理
  - 窗口管理

- **渲染进程**：
  - Vue3 UI 界面
  - 组件库：Bootstrap5
  - 列表展示与交互
  - 状态管理（Pinia）

### 3.2 存储方案
- **本地**：SQLite + Knex.js ORM
- **云同步**：Firebase Firestore（V2.0）

## 4. 设置选项

- **快捷键自定义**
- **存储位置设置**
- **自动清除时间**（30/60/90天）
- **导出选项**（CSV/JSON）
- **同步账户管理**（V2.0）

## 5. 辅助功能

- **全局搜索**（Cmd/Ctrl+F 聚焦搜索框）
- **键盘导航**（↑↓键选择条目，Enter打开来源）
- **多语言支持**（中英文切换）
- **通知系统**（保存成功提示）

## 安装和使用

### 安装依赖
```bash
npm install
```

### 启动应用
```bash
npm start
```

### 快捷键

#### 文本捕获快捷键
- `Ctrl+Q`: **推荐方式** - 先用鼠标选中文字并复制（Ctrl+C），然后按Ctrl+Q快速添加到短语库
- `Alt+Q`: **滑动取词** - 选中文字后直接按Alt+Q，程序会智能获取选中文本，自动模拟Ctrl+C并恢复原剪贴板内容
- `Ctrl+Alt+Q`: 直接打开短语收集器窗口，手动输入或粘贴内容

#### 其他快捷键
- `Ctrl+Shift+F` - 聚焦搜索框
- `Ctrl+N` - 新建短语
- `Ctrl+E` - 导出数据
- `F12` - 开发者工具
- `Escape` - 关闭模态框

#### 使用建议
1. **最稳定的方式**：选中文字 → Ctrl+C复制 → Ctrl+Q添加
2. **快速方式**：选中文字 → Alt+Q（一步完成，但可能在某些程序中不工作）
3. **手动方式**：Ctrl+Alt+Q打开窗口 → 手动输入或粘贴

## 开发路线图

1. ✅ Electron 基础框架搭建
2. ✅ 全局快捷键与文本捕获
3. ✅ 主界面UI实现
4. ✅ 本地SQLite存储
5. ✅ 基本列表展示
6. 🔄 操作图标（删除、标记状态切换）

## 技术栈

- **框架**：Electron
- **前端**：HTML5 + CSS3 + JavaScript
- **UI库**：Bootstrap 5 + Bootstrap Icons
- **数据库**：SQLite + Knex.js
- **构建工具**：npm

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！

---

**注意**：首次运行时，应用会自动创建数据库文件和必要的目录结构。